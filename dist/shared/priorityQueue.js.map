{"version":3,"sources":["src/shared/priorityQueue.es6.js"],"names":[],"mappings":"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","file":"src/shared/priorityQueue.es6.js","sourcesContent":["var _ = require('lodash');\n\nexport function Prioritizable(GetPriority, ComparePriority) {\n  return function (target, key, descriptor) {\n    console.log(target, key, descriptor);\n    target.getPriority = GetPriority;\n    target.comparePriority = ComparePriority;\n    return descriptor;\n  }\n}\n\nexport class PriorityQueue {\n  constructor(...items) {\n    this.queue  = _(items).groupBy((item) => {\n        return item.Priority();\n    }).value();\n    this.queues = _.keys(this.queue);\n  }\n\n  Add(...items){\n    for (var item of items) {\n      if(this.queue[item.Priority()]){\n        this.queue[item.Priority()].push(item);\n      } else {\n        this.queues.splice(_.sortedIndex(this.queues, item.Priority()), 0, item.Priority());\n        this.queue[item.Priority()] = [item];\n      }\n    }\n  }\n\n  Merge(pQueue){\n    if(this.queue[item.Priority()]){\n      this.queue[item.Priority()].push(item);\n    } else {\n      this.queues.splice(_.sortedIndex(this.queues, item.Priority()), 0, item.Priority());\n      this.queue[item.Priority()] = [item];\n    }\n  }\n\n  Get(){\n    return this.queue[this.queues[0]][0];\n  }\n\n  GetAll(){\n    return _(this.queue).reduce((p, c, key) => {\n      return p.concat(c);\n    }, new Array());\n  }\n\n  Pop(){\n    let ret = this.queue[this.queues[0]].shift();\n    if (this.queue[this.queues[0]].length === 0){\n      this.queues.shift();\n      delete this.queue[ret.Priority()];\n    }\n    return ret;\n  }\n\n  Print(){\n    return _(this.queue).map((item) => {\n      return JSON.stringify(item);\n    }).value();\n  }\n}\n"]}